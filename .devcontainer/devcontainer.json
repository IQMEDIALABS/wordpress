// For format details, see https://aka.ms/devcontainer.json.
{
    "name": "WordPress Core Development",
    "dockerComposeFile": "docker-compose.yml",
    "service": "app",
    "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",

    // Features to add to the dev container. More info: https://containers.dev/features.
    "features": {
        "./local-features/chromium": "latest",
        "./local-features/welcome-message": "latest"
    },

    // Use 'postCreateCommand' to run commands after the container is created.
    "postCreateCommand": "chmod +x .devcontainer/setup.sh && .devcontainer/setup.sh",

    // Use 'forwardPorts' to make a list of ports inside the container available locally.
    "forwardPorts": [
        8080
    ],

    // Maps a port number, "host:port" value, range, or regular expression to a set of default options. See port attributes for available options
    "portsAttributes": {
        "8080": {
            "label": "WordPress Development Site"
        }
    },

    // Comment out connect as root instead. More info: https://aka.ms/vscode-remote/containers/non-root.
    "remoteUser": "wp_php",

    // A set of name-value pairs that sets or overrides environment variables for the devcontainer.json supporting service / tool (or sub-processes like terminals) but not the container as a whole.
    "remoteEnv": { "LOCAL_WORKSPACE_FOLDER": "${localWorkspaceFolder}" }
}
